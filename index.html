<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leukemia Prognosis</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="app-background"></div>

    <header class="app-header">
        <div class="logo-area">
            <i class="fa-solid fa-dna logo-icon"></i>
            <div class="logo-text">
                <h1>leukemia<span class="highlight">analysis</span></h1>
                <small>AML Survival prognostics</small>
            </div>
        </div>
        <nav class="main-nav">
            <button class="nav-btn active" data-tab="home">Overview</button>
            <button class="nav-btn" data-tab="analysis">Dashboard</button>
            <button class="nav-btn" data-tab="treatment">Treatment</button>
            <button class="nav-btn" data-tab="bulk">Cohort</button>
            <button class="nav-btn" data-tab="trials">Trials</button>
        </nav>
    </header>

    <main class="app-container">

        <section id="home" class="tab-content active">
            <div class="hero-section">
                <div class="hero-content">
                    <h2>Precision Prognostics.<br>Simplified.</h2>
                    <p>A specialized decision support system for Acute Myeloid Leukemia. Integrate patient genomics with DeepHit & Logistic Hazard models to predict outcomes.</p>
                    <button class="btn-primary btn-lg" onclick="document.querySelector('[data-tab=\'analysis\']').click()">
                        Start New Analysis <i class="fa-solid fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <div class="workflow-section">
                <h3 class="section-title">Analysis Workflow</h3>
                <div class="workflow-steps">
                    <div class="step-card">
                        <div class="step-icon"><i class="fa-solid fa-sliders"></i></div>
                        <h4>1. Input Profile</h4>
                        <p>Enter clinical & genetic data (Age, FLT3, NPM1, etc.).</p>
                    </div>
                    <div class="step-arrow"><i class="fa-solid fa-arrow-right-long"></i></div>
                    <div class="step-card">
                        <div class="step-icon"><i class="fa-solid fa-brain"></i></div>
                        <h4>2.Prediction</h4>
                        <p>Deep learning models generate survival curves.</p>
                    </div>
                    <div class="step-arrow"><i class="fa-solid fa-arrow-right-long"></i></div>
                    <div class="step-card">
                        <div class="step-icon"><i class="fa-solid fa-chart-line"></i></div>
                        <h4>3. View Insights</h4>
                        <p>Analyze risk scores, survival estimates, and drivers.</p>
                    </div>
                </div>
            </div>

            <div class="context-section">
                <div class="context-card">
                    <h3><i class="fa-solid fa-notes-medical"></i> Clinical Context: AML</h3>
                    <p>Acute Myeloid Leukemia (AML) is an aggressive blood cancer that starts in the bone marrow, where faulty young white blood cells multiply rapidly and push out the healthy cells needed for oxygen transport, clotting, and infection defense.</p>
                    <h4 style="margin-top: 1rem;">Key Prognostic Factors</h4>
                    <ul class="marker-list">
                        <li><strong>FLT3-ITD:</strong> A common mutation associated with higher relapse risk and inferior overall survival.</li>
                        <li><strong>NPM1:</strong> Presence of NPM1 mutation without FLT3-ITD is a favorable prognostic indicator.</li>
                        <li><strong>BMBP:</strong> Bone Marrow Blast Percentage indicates tumor burden; higher percentages generally correlate with poorer outcomes.</li>
                        <li><strong>Transplant:</strong> Allogeneic Stem Cell Transplant is often a curative option for intermediate and high-risk patients.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="analysis" class="tab-content">
            <div class="dashboard-layout">
                <aside class="sidebar-panel">
                    <div class="panel-header">
                        <h3>Patient Data</h3>
                        <button id="reset-btn" class="btn-icon"><i class="fa-solid fa-rotate-right"></i></button>
                    </div>
                    <form id="prediction-form">
                        <fieldset>
                            <legend>Demographics</legend>
                            <div class="input-row">
                                <div class="field">
                                    <label>Age: <span id="val-age" class="value-tag">45</span></label>
                                    <input type="range" id="age" name="Age" min="18" max="99" value="45" oninput="document.getElementById('val-age').innerText=this.value">
                                </div>
                                <div class="field">
                                    <label>Gender</label>
                                    <select id="gender" name="Gender">
                                        <option value="0.0">Male</option>
                                        <option value="1.0">Female</option>
                                    </select>
                                </div>
                            </div>
                        </fieldset>
                        <fieldset>
                            <legend>Clinical & Molecular</legend>
                            <div class="field">
                                <label>Blasts (BMBP): <span id="val-bmbp" class="value-tag">15%</span></label>
                                <input type="range" id="bmbp" name="BMBP" min="0" max="100" value="15" oninput="document.getElementById('val-bmbp').innerText=this.value + '%'">
                            </div>
                            <div class="input-row">
                                <div class="field">
                                    <label>FLT3-ITD</label>
                                    <select id="flt3" name="FLT3.ITD">
                                        <option value="0.0">Wild Type</option>
                                        <option value="1.0">Mutated</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>NPM1</label>
                                    <select id="npm1" name="NPM1">
                                        <option value="0.0">Wild Type</option>
                                        <option value="1.0">Mutated</option>
                                    </select>
                                </div>
                            </div>
                        </fieldset>
                        <fieldset>
                            <legend>Intervention</legend>
                            <div class="field">
                                <label>Transplant Status</label>
                                <select id="transplant" name="Transplant">
                                    <option value="0.0">No Transplant</option>
                                    <option value="1.0">Received Transplant</option>
                                </select>
                            </div>
                            <div class="hidden-input">
                                <input type="hidden" id="chemo" name="Chemotherapy" value="1.0">
                            </div>
                        </fieldset>
                        <div class="model-toggle">
                            <label>Model:</label>
                            <div class="toggle-group">
                                <input type="radio" name="model_type" value="deephit" id="m1" checked>
                                <label for="m1">DeepHit</label>
                                <input type="radio" name="model_type" value="loghazard" id="m2">
                                <label for="m2">LogHazard</label>
                            </div>
                        </div>
                        <button type="submit" id="run-btn" class="btn-primary btn-full">RUN PREDICTION</button>
                        <p id="status-msg">Ready</p>
                    </form>
                </aside>
                <div class="main-panel">
                    <div class="stats-row">
                        <div class="stat-card-pro">
                            <div class="card-icon icon-blue"><i class="fa-solid fa-chart-pie"></i></div>
                            <div class="card-content">
                                <h4 id="card-title-1">Risk Stratification</h4>
                                <span class="stat-val" id="res-value-1">--</span>
                            </div>
                        </div>
                        <div class="stat-card-pro">
                            <div class="card-icon icon-purple"><i class="fa-solid fa-hourglass-end"></i></div>
                            <div class="card-content">
                                <h4 id="card-title-2">Median Survival</h4>
                                <span class="stat-val" id="res-value-2">--</span>
                            </div>
                        </div>
                        <div class="stat-card-pro">
                            <div class="card-icon icon-green"><i class="fa-solid fa-arrow-trend-up"></i></div>
                            <div class="card-content">
                                <h4 id="card-title-3">Cohort Standing</h4>
                                <span class="stat-val" id="res-value-3">--</span>
                            </div>
                        </div>
                        <div class="stat-card-pro">
                            <div class="card-icon icon-orange"><i class="fa-solid fa-notes-medical"></i></div>
                            <div class="card-content">
                                <h4 id="card-title-4">Condition Severity</h4>
                                <span class="stat-val" id="res-value-4">--</span>
                            </div>
                        </div>
                    </div>
                    <div class="drivers-bar">
                        <span><i class="fa-solid fa-tags"></i> Drivers:</span>
                        <div id="drivers-list" class="drivers-content">
                            <span class="tag-empty">Waiting for analysis...</span>
                        </div>
                    </div>
                    <div class="charts-row">
                        <div class="chart-box large"><div id="survival-plot" style="height: 400px;"></div></div>
                        <div class="chart-box small"><div id="radar-plot" style="height: 400px;"></div></div>
                    </div>
                    <div id="bold-analysis-container" class="ai-box" style="display:none;">
                        <div class="ai-header"><i class="fa-solid fa-microchip"></i> AI Insight</div>
                        <p id="bold-analysis-text"></p>
                    </div>
                </div>
            </div>
        </section>

        <section id="treatment" class="tab-content">
            <div class="dashboard-layout">
                <aside class="sidebar-panel">
                    <h3>Simulate Outcomes</h3>
                    <p class="text-sm">Compare Standard Chemo vs. ASCT.</p>
                    <div class="patient-summary" id="tx-profile-summary"><li>Run prediction first.</li></div>
                    <button id="run-tx-btn" class="btn-primary btn-full">Simulate</button>
                </aside>
                <div class="main-panel">
                    <div class="stats-row half">
                        <div class="stat-card-pro">
                            <div class="card-icon icon-green"><i class="fa-solid fa-shield-virus"></i></div>
                            <div class="card-content">
                                <h4>Relapse Risk Reduction</h4>
                                <span class="stat-val val-positive" id="tx-risk-reduction">--%</span>
                            </div>
                        </div>
                        <div class="stat-card-pro">
                            <div class="card-icon icon-blue"><i class="fa-solid fa-heart-pulse"></i></div>
                            <div class="card-content">
                                <h4>Cure Probability</h4>
                                <span class="stat-val val-positive" id="tx-cure-prob">--%</span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-box"><div id="treatment-plot" style="height: 400px;"></div></div>
                    <div class="ai-box">
                        <div class="ai-header">Recommendation</div>
                        <p id="tx-analysis-text">Awaiting simulation...</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="bulk" class="tab-content">
            <div class="center-panel">
                <h2>Cohort Analysis</h2>
                <div class="upload-zone">
                    <form id="bulk-upload-form">
                        <i class="fa-solid fa-cloud-arrow-up"></i>
                        <p>Upload Patient CSV</p>
                        <input type="file" id="patient-file" name="file" accept=".csv, .tsv" required>
                        <button type="submit" id="upload-btn" class="btn-primary">Analyze</button>
                    </form>
                </div>
                <div id="bulk-results-view" style="display:none; margin-top: 30px; width: 100%;">
                    <div class="stats-row thirds">
                        <div class="stat-card-pro"><div class="card-content"><h4>Patients</h4><span id="cohort-total" class="stat-val">--</span></div></div>
                        <div class="stat-card-pro"><div class="card-content"><h4>Avg Survival</h4><span id="cohort-avg-surv" class="stat-val">--</span></div></div>
                        <div class="stat-card-pro"><div class="card-content"><h4>High Risk</h4><span id="cohort-high-risk" class="stat-val val-negative">--</span></div></div>
                    </div>
                    <div class="charts-row">
                        <div class="chart-box"><div id="bulk-curve-plot" style="height: 350px;"></div></div>
                        <div class="chart-box"><div id="bulk-pie-plot" style="height: 350px;"></div></div>
                    </div>
                    <div class="ai-box">
                        <p id="risk-factors-text"></p>
                        <p id="treatment-suggestion-text"></p>
                    </div>
                </div>
            </div>
        </section>

        <section id="trials" class="tab-content">
            <div class="center-panel">
                <h2>Trial Matching</h2>
                <div class="trial-search-bar">
                    <div class="trial-info">
                        <span>Matching for: <strong id="trial-age-display">--</strong> / <strong id="trial-flt3-display">--</strong></span>
                    </div>
                    <div class="btn-group">
                        <button id="find-trials-btn" class="btn-primary">Find Trials</button>
                        <a href="https://www.google.com/maps/search/oncology+center+near+me" target="_blank" class="btn-secondary">
                            <i class="fa-solid fa-location-dot"></i> Find Clinics
                        </a>
                    </div>
                </div>
                <div id="trials-results" class="trials-list">
                    <div class="empty-msg">No trials loaded.</div>
                </div>
            </div>
        </section>

    </main>

    <script src="script.js"></script>
</body>
</html>
